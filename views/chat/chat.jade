div#chat-header
    div.chat-name.pull-left {{uChatName}}
    div.chat-buttons
        span.glyphicon.glyphicon-remove.chat-close(ng-click="ChatCtl.close()")

div#chat-container
    div#chat-content(scroll-glue, ng-model="ChatCtl.properties.glued")
        div.room(ng-if="!ChatCtl.userActive")
            div.alert.alert-warning
                p= __('No messages yet')
        div.room(room="{{key}}", ng-repeat="(key, room) in ChatCtl.rooms",
            ng-show="ChatCtl.userActive == key ? 'true' : 'false'")
            div(ng-repeat="message in room.messages | orderBy:'created'",
                id="msg{{message._id}}",
                ng-class="message.user_src._id == user._id ? 'chat-message-me' : 'chat-message-other'")
                //- img.img-circle(ng-if="message.user_src.image",
                //-     ng-src="{{message.user_src.image}}")
                //- img.img-circle(ng-if="!message.user_src.image",
                //-     data-src="/vendor/misc/holder.js/40x40")
                div.chat-message {{message.text}}   
    div#chat-text
        input.form-control(type="text", ng-keypress="ChatCtl.send($event)", ng-model="ChatCtl.chatText")

div#chat-users
    ul.chat-users
        li.chat-user(ng-repeat="user in ChatCtl.usersInSession",
            ng-class="ChatCtl.user._id == ChatCtl.userActive ? 'active':''",
            uid="{{ChatCtl.user._id}}", ng-click="ChatCtl.chatWith($event.currentTarget)")
            span.badge(ng-if="ChatCtl.user.unread > 0") {{user.unread}}
            ng-thumb-user(image="ChatCtl.user.image", size="40")
            //- img.img-circle(ng-if="user.image", ng-src="{{user.image}}")
            //- img.img-circle(ng-if="!user.image",
            //-     data-src="/vendor/misc/holder.js/40x40")
            span.uname {{ChatCtl.user.username}}
            div.state(class="{{ChatCtl.user.state}}")
